rbind(df_resultados,df_resultados.k045_030)
## fatores
df_resultados$Site <- factor(df_resultados$Site)
df_resultados$k <- factor(df_resultados$k,levels=unique(df_resultados$k))
df_resultados$k.0 = as.numeric(as.character(df_resultados$k))
df_resultados$MN <- factor(df_resultados$MN,levels = c("EE","EI"))
# df_resultados$k %>% contrasts()
# df_resultados$MN %>% contrasts()
### z score ###
f_z <- function(x){
m <- base::mean(x,na.rm=TRUE)
sd <- sd(x,na.rm=TRUE)
output <- (x-m)/sd
return(output)
}
df_resultados.z <- as.data.frame(apply(df_resultados[6:12],2,f_z))
names(df_resultados.z) <- sapply(names(df_resultados[6:12]), function(x) paste(x,".z",sep=""))
df_resultados %<>% cbind(.,df_resultados.z)
### Summary ###
# summary(df_resultados)
# str(df_resultados)
# head(df_resultados)
## rm
ls()
rm(list=c("df_bateria","f_z","df_resultados.k045_030","df_resultados.z"))
df_resultados <- readr::read_csv("/home/danilo/Documentos/Doutorado/artigo_mestrado/Rmd_e_dados/df_resultados.csv")
names(df_resultados)[1] <- "Site"
df_resultados.k045_030 <- filter(df_resultados,k=="0.99") %>% dplyr::select(-k) %>% unique
df_resultados.k045_030[,"GOF"] <- NA
df_bateria <- data_frame(Site=gl(80,4*2,labels=unique(df_resultados.k045_030$Site)),
k=gl(4,80*2,labels = seq(0.45,0.30,-0.05)),
MN=gl(2,4*80,labels = c("EE","EI")) )
df_resultados.k045_030 %<>% left_join(x=df_bateria,y=.,by = c("Site","MN"))
df_resultados %<>% rbind(.,df_resultados.k045_030)
### leitura ###
df_resultados <- readr::read_csv("/home/danilo/Documentos/Doutorado/artigo_mestrado/Rmd_e_dados/df_resultados.csv")
# df_resultados %>% str
### padronização ###
names(df_resultados)[1] <- "Site"
# para o resultada das simulações de k[0.45;0.30]
df_resultados.k045_030 <- filter(df_resultados,k=="0.99") %>% dplyr::select(-k) %>% unique
df_resultados.k045_030[,"GOF"] <- NA
df_bateria <- data_frame(Site=gl(80,4*2,labels=unique(df_resultados.k045_030$Site)),
k=gl(4,80*2,labels = seq(0.45,0.30,-0.05)),
MN=gl(2,4*80,labels = c("EE","EI")) )
df_resultados.k045_030 %<>% left_join(x=df_bateria,y=.,by = c("Site","MN"))
# dim(df_resultados) == dim(df_resultados.k045_030)
df_resultados %<>% rbind(.,df_resultados.k045_030)
## fatores
df_resultados$Site <- factor(df_resultados$Site)
df_resultados$k <- factor(df_resultados$k,levels=unique(df_resultados$k))
df_resultados$k.0 = as.numeric(as.character(df_resultados$k))
df_resultados$MN <- factor(df_resultados$MN,levels = c("EE","EI"))
# df_resultados$k %>% contrasts()
# df_resultados$MN %>% contrasts()
### z score ###
f_z <- function(x){
m <- base::mean(x,na.rm=TRUE)
sd <- sd(x,na.rm=TRUE)
output <- (x-m)/sd
return(output)
}
df_resultados.z <- as.data.frame(apply(df_resultados[6:12],2,f_z))
names(df_resultados.z) <- sapply(names(df_resultados[6:12]), function(x) paste(x,".z",sep=""))
df_resultados %<>% cbind(.,df_resultados.z)
### Summary ###
# summary(df_resultados)
# str(df_resultados)
# head(df_resultados)
## rm
# ls()
rm(list=c("df_bateria","f_z","df_resultados.k045_030","df_resultados.z"))
# k continua ou discreta tem diferença?
l_md <- vector("list",2)
names(l_md) <- c("k.z","k.f")
l_md[[1]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k.z * MN + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
library(gridExtra)
library(tidyverse)
library(magrittr)
library(plyr)
library(DHARMa) # resíduos quantilicos
library(lme4) # pacote de criação dos modelos estatísticos
# k continua ou discreta tem diferença?
l_md <- vector("list",2)
names(l_md) <- c("k.z","k.f")
l_md[[1]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k.z * MN + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
df_resultados
df_resultados <- readr::read_csv("/home/danilo/Documentos/Doutorado/artigo_mestrado/Rmd_e_dados/df_resultados.csv")
names(df_resultados)[1] <- "Site"
df_resultados.k045_030 <- filter(df_resultados,k=="0.99") %>% dplyr::select(-k) %>% unique
df_resultados.k045_030[,"GOF"] <- NA
df_bateria <- data_frame(Site=gl(80,4*2,labels=unique(df_resultados.k045_030$Site)),
k=gl(4,80*2,labels = seq(0.45,0.30,-0.05)),
MN=gl(2,4*80,labels = c("EE","EI")) )
df_resultados.k045_030 %<>% left_join(x=df_bateria,y=.,by = c("Site","MN"))
df_resultados %<>% rbind(.,df_resultados.k045_030)
df_resultados$Site <- factor(df_resultados$Site)
df_resultados$k <- factor(df_resultados$k,levels=unique(df_resultados$k))
df_resultados$k.0 = as.numeric(as.character(df_resultados$k))
df_resultados$MN <- factor(df_resultados$MN,levels = c("EE","EI"))
names(df_resultados)
library(gridExtra)
library(tidyverse)
library(magrittr)
library(plyr)
library(DHARMa) # resíduos quantilicos
library(lme4) # pacote de criação dos modelos estatísticos
### leitura ###
df_resultados <- readr::read_csv("/home/danilo/Documentos/Doutorado/artigo_mestrado/Rmd_e_dados/df_resultados.csv")
# df_resultados %>% str
### padronização ###
names(df_resultados)[1] <- "Site"
# para o resultada das simulações de k[0.45;0.30]
df_resultados.k045_030 <- filter(df_resultados,k=="0.99") %>% dplyr::select(-k) %>% unique
df_resultados.k045_030[,"GOF"] <- NA
df_bateria <- data_frame(Site=gl(80,4*2,labels=unique(df_resultados.k045_030$Site)),
k=gl(4,80*2,labels = seq(0.45,0.30,-0.05)),
MN=gl(2,4*80,labels = c("EE","EI")) )
df_resultados.k045_030 %<>% left_join(x=df_bateria,y=.,by = c("Site","MN"))
# dim(df_resultados) == dim(df_resultados.k045_030)
df_resultados %<>% rbind(.,df_resultados.k045_030)
## fatores
df_resultados$Site <- factor(df_resultados$Site)
df_resultados$k <- factor(df_resultados$k,levels=unique(df_resultados$k))
df_resultados$k.0 = as.numeric(as.character(df_resultados$k))
df_resultados$MN <- factor(df_resultados$MN,levels = c("EE","EI"))
# df_resultados$k %>% contrasts()
# df_resultados$MN %>% contrasts()
### z score ###
f_z <- function(x){
m <- base::mean(x,na.rm=TRUE)
sd <- sd(x,na.rm=TRUE)
output <- (x-m)/sd
return(output)
}
df_resultados.z <- as.data.frame(apply(df_resultados[c(6:12,19)],2,f_z))
names(df_resultados.z) <- sapply(names(df_resultados[c(6:12,19)]), function(x) paste(x,".z",sep=""))
df_resultados %<>% cbind(.,df_resultados.z)
names(df_resultados)
### Summary ###
# summary(df_resultados)
# str(df_resultados)
# head(df_resultados)
## rm
# ls()
rm(list=c("df_bateria","f_z","df_resultados.k045_030","df_resultados.z"))
df_resultados
df_resultados
l_md[[1]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k.0.z * MN + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md[[2]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k * MN + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md[[2]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k * MN + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
AICctab(l_md,weights=T)
library(gridExtra)
library(tidyverse)
library(magrittr)
library(plyr)
library(DHARMa) # resíduos quantilicos
library(lme4) # pacote de criação dos modelos estatísticos
library(bbmle)
AICctab(l_md,weights=T)
l_md <- vector("list",5)
names(l_md) <- c("k.z 1|Site","k.z MN|Site","k.z k.z*MN|Site","k.f 1|Site","k.f MN|Site")
l_md[[1]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k.0.z * MN + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md[[2]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k.0.z * MN + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md[[3]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k.0.z * MN + (k.0.z*MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md[[4]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k * MN + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md[[5]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k * MN + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
AICctab(l_md,weights=T)
l_md.selecao <- vector("list",19)
names(l_md.selecao) <- c("p*k*MN",# modelo cheio
"p*k*MN-p:k:MN", #MC - 3a ordem
"p*(k+MN)","k*(p+MN)","MN*(p+k)", #2 interações
"p*k+MN","p*MN+k","k*MN+p", #1 interação + preditor
"p*k","p*MN","k*MN", #1 interação
"p+k+MN",#aditivo 3
"p+k","p+MN","k+MN", #aditivo 2
"p","k","MN", #preditor isolado
"1") #nulo
#modelo cheio
l_md.selecao[[1]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k * MN + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
#modelo cheio - interação 3a ordem
l_md.selecao[[2]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k * MN - p.z:k:MN + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
#2 interações
l_md.selecao[[3]] <- glmer(cbind(GOF,100-GOF) ~ p.z * (k + MN) + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md.selecao[[4]] <- glmer(cbind(GOF,100-GOF) ~ k * (p.z + MN) + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md.selecao[[5]] <- glmer(cbind(GOF,100-GOF) ~ MN * (p.z + k) + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
#1 interação + preditor
l_md.selecao[[6]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k + MN + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md.selecao[[7]] <- glmer(cbind(GOF,100-GOF) ~ p.z * MN + k + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md.selecao[[8]] <- glmer(cbind(GOF,100-GOF) ~ k * MN + p.z + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
#1 interação
l_md.selecao[[9]] <- glmer(cbind(GOF,100-GOF) ~ p.z * k + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md.selecao[[10]] <- glmer(cbind(GOF,100-GOF) ~ p.z * MN + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md.selecao[[11]] <- glmer(cbind(GOF,100-GOF) ~ k * MN + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
#aditivo 3
l_md.selecao[[12]] <- glmer(cbind(GOF,100-GOF) ~ p.z + k + MN + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
#aditivo 2
l_md.selecao[[13]] <- glmer(cbind(GOF,100-GOF) ~ p.z + k + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md.selecao[[14]] <- glmer(cbind(GOF,100-GOF) ~ p.z + MN + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md.selecao[[15]] <- glmer(cbind(GOF,100-GOF) ~ k + MN + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
#aditivo 1
l_md.selecao[[16]] <- glmer(cbind(GOF,100-GOF) ~ p.z + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md.selecao[[17]] <- glmer(cbind(GOF,100-GOF) ~ k + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
l_md.selecao[[18]] <- glmer(cbind(GOF,100-GOF) ~ MN + (MN|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
# nulo
l_md.selecao[[19]] <- glmer(cbind(GOF,100-GOF) ~ 1 + (1|Site), family = "binomial",data=df_resultados,
control=glmerControl(optimizer="bobyqa",optCtrl=list(maxfun=100000)))
AICctab(l_md.selecao,weights=T)
library(gridExtra)
library(tidyverse)
library(magrittr)
library(plyr)
library(DHARMa) # resíduos quantilicos
library(lme4) # pacote de criação dos modelos estatísticos
library(bbmle)
### leitura ###
df_resultados <- readr::read_csv("/home/danilo/Documentos/Doutorado/artigo_mestrado/Rmd_e_dados/df_resultados.csv")
# df_resultados %>% str
### padronização ###
names(df_resultados)[1] <- "Site"
# para o resultada das simulações de k[0.45;0.30]
df_resultados.k045_030 <- filter(df_resultados,k=="0.99") %>% dplyr::select(-k) %>% unique
df_resultados.k045_030[,"GOF"] <- NA
df_bateria <- data_frame(Site=gl(80,4*2,labels=unique(df_resultados.k045_030$Site)),
k=gl(4,80*2,labels = seq(0.45,0.30,-0.05)),
MN=gl(2,4*80,labels = c("EE","EI")) )
df_resultados.k045_030 %<>% left_join(x=df_bateria,y=.,by = c("Site","MN"))
# dim(df_resultados) == dim(df_resultados.k045_030)
df_resultados %<>% rbind(.,df_resultados.k045_030)
## fatores
df_resultados$Site <- factor(df_resultados$Site)
df_resultados$k <- factor(df_resultados$k,levels=unique(df_resultados$k))
df_resultados$k.0 = as.numeric(as.character(df_resultados$k))
df_resultados$MN <- factor(df_resultados$MN,levels = c("EE","EI"))
# df_resultados$k %>% contrasts()
# df_resultados$MN %>% contrasts()
### z score ###
f_z <- function(x){
m <- base::mean(x,na.rm=TRUE)
sd <- sd(x,na.rm=TRUE)
output <- (x-m)/sd
return(output)
}
# names(df_resultados)
df_resultados.z <- as.data.frame(apply(df_resultados[c(6:12,19)],2,f_z))
names(df_resultados.z) <- sapply(names(df_resultados[c(6:12,19)]), function(x) paste(x,".z",sep=""))
df_resultados %<>% cbind(.,df_resultados.z)
### Summary ###
# summary(df_resultados)
# str(df_resultados)
# head(df_resultados)
## rm
# ls()
rm(list=c("df_bateria","f_z","df_resultados.k045_030","df_resultados.z"))
df_plot <- df_resultados %>% dplyr::filter(k=="0.99" & MN=="EE") %>% dplyr::select(Site, p, S,p.z,S.z) %>% unique
# avaliando as curvas pelo quantiles
# df_plot %<>% mutate(terceiro_quantil = ifelse(p>quantile(df_plot$p,probs=0.75),">_3oQ","<_3oQ"))
l_p <- vector("list",6)
l_p[[1]] <- ggplot(df_plot, aes(x=p)) +
geom_histogram(bins=30) +
geom_vline(xintercept = c(quantile(df_plot$p,probs = c(0.25,0.50,0.75))),color="red")
# geom_density()
l_p[[2]] <- ggplot(df_plot, aes(x=p.z)) +
geom_histogram(bins=30) +
geom_vline(xintercept = c(quantile(df_plot$p.z,probs = c(0.25,0.50,0.75))),color="red")
# geom_density()
l_p[[3]] <- ggplot(df_plot, aes(x=S)) +
geom_histogram(bins=30) +
geom_vline(xintercept = quantile(df_plot$S,probs = c(0.25,0.50,0.75)),color="red")
l_p[[4]] <- ggplot(df_plot, aes(x=S.z)) +
geom_histogram(bins=30) +
geom_vline(xintercept = c(quantile(df_plot$S.z,probs = c(0.25,0.50,0.75))),color="red")
l_p[[5]] <- ggplot(df_plot, aes(x=p,y=S)) +
geom_hline(yintercept = quantile(df_plot$S,probs = c(0.25,0.50,0.75)),color="red") +
geom_vline(xintercept = quantile(df_plot$p,probs = c(0.25,0.50,0.75)),color="red") +
geom_point() +
geom_smooth(method="lm")
l_p[[6]] <- ggplot(df_plot, aes(x=p.z,y=S.z)) +
geom_hline(yintercept = quantile(df_plot$S.z,probs = c(0.25,0.50,0.75)),color="red") +
geom_vline(xintercept = quantile(df_plot$p.z,probs = c(0.25,0.50,0.75)),color="red") +
geom_point() +
geom_smooth(method="lm")
# do.call("grid.arrange",c(l_p,ncol=3))
grid.arrange(l_p[[1]],l_p[[2]],l_p[[3]],l_p[[4]],l_p[[5]],l_p[[6]],
layout_matrix = rbind(c(1,1,3,3,5,5),
c(2,2,4,4,6,6) )
)
ls()
AICctab(l_md.selecao,weights=T) %>% head
AICctab(l_md.selecao,weights=T)
l_md.selecao["p*k*MN"]
plot(simulateResiduals(l_md.selecao["p*k*MN"],1000))
teste <- simulateResiduals(l_md.selecao["p*k*MN"],1000)
teste <- simulateResiduals(l_md.selecao[["p*k*MN"]],1000)
teste
plot(simulateResiduals(l_md.selecao[["p*k*MN"]],1000))
knitr::opts_chunk$set(echo = FALSE, tidy = TRUE, include = TRUE, warning = FALSE,cache = TRUE)
plot(simulateResiduals(l_md.selecao[["p*k*MN"]],1000))
l_md.selecao[["p*k*MN"]]
library(doMC)
library(magrittr)
library(tidyverse)
library(plyr)
setwd("/home/danilo/Documentos/Doutorado/artigo_mestrado/simulacao/")
source("dinamica_coalescente_beta.R")
df_referencia <- read.csv(file="df_referencia.csv",row.names = 1,as.is = TRUE)
func1 <- function(x,replicas=10) {
x$U <- NA
x <- x[rep(1:dim(x)[1],each=replicas),]
}
df_referencia %<>% func1()
k_factor <- unique(df_referencia$k)
df_simulacao <- map_df(Sys.glob("./U/*.csv"),read.csv)
df_simulacao %<>% ddply(names(.)[-13],summarise,U_med=mean(U),U_var=var(U))
df_simulacao %<>% ddply(names(.)[-13],summarise,U_med=mean(U),U_var=var(U))
df_simulacao <- map_df(Sys.glob("./U/*.csv"),read.csv)
df_simulacao %<>% ddply(names(.)[-13],summarise,U_med=mean(U),U_var=var(U))
df_simulacao %>% head
op <- options(digits.secs=6)
a <- 20
i <- 1
df_sim <- df_simulacao %>% filter(k == k_factor[20])
#
aviao <- list()
aviao <- dinamica_coalescente(U = df_temp[i,"U_med"],
S = 0,
N_simul = 100,
seed = as.numeric(Sys.time()),
disp_range = df_temp[i,"d"],
disp_kernel = df_temp[i,"kernel_code"],
landscape = df_temp[i,"txt.file"])
df_temp=df_sim
aviao <- list()
aviao <- dinamica_coalescente(U = df_temp[i,"U_med"],
S = 0,
N_simul = 100,
seed = as.numeric(Sys.time()),
disp_range = df_temp[i,"d"],
disp_kernel = df_temp[i,"kernel_code"],
landscape = df_temp[i,"txt.file"])
df_temp$txt.file %>% class
df_simulacao$txt.file %<>% as.factor
aviao <- dinamica_coalescente(U = df_temp[i,"U_med"],
S = 0,
N_simul = 100,
seed = as.numeric(Sys.time()),
disp_range = df_temp[i,"d"],
disp_kernel = df_temp[i,"kernel_code"],
landscape = df_temp[i,"txt.file"])
df_sim <- df_simulacao %>% filter(k == k_factor[20])
df_temp=df_sim
aviao <- list()
aviao <- dinamica_coalescente(U = df_temp[i,"U_med"],
S = 0,
N_simul = 100,
seed = as.numeric(Sys.time()),
disp_range = df_temp[i,"d"],
disp_kernel = df_temp[i,"kernel_code"],
landscape = df_temp[i,"txt.file"])
df_temp[i,"txt.file"]
df_simulacao <- map_df(Sys.glob("./U/*.csv"),read.csv)
df_simulacao %<>% ddply(names(.)[-13],summarise,U_med=mean(U),U_var=var(U))
df_simulacao$txt.file %<>% as.character()
op <- options(digits.secs=6)
df_sim <- df_simulacao %>% filter(k == k_factor[20])
df_temp=df_sim
df_temp[i,"txt.file"]
aviao <- list()
aviao <- dinamica_coalescente(U = df_temp[i,"U_med"],
S = 0,
N_simul = 100,
seed = as.numeric(Sys.time()),
disp_range = df_temp[i,"d"],
disp_kernel = df_temp[i,"kernel_code"],
landscape = df_temp[i,"txt.file"])
aviao %>% class()
aviao %>% dim
df_simulacao %>% head
df_simulacao %>% summary()
df_simulacao <- map_df(Sys.glob("./U/*.csv"),read.csv)
df_simulacao %<>% ddply(names(.)[-13],summarise,U_med=mean(U),U_var=var(U))
df_simulacao$txt.file %<>% as.character()
for(a in 19:length(k_factor)){
# a <- 20
# i <- 1
df_sim <- df_simulacao %>% filter(k == k_factor[20])
# df_temp=df_sim
### funcao para paralelizar o programa
# funcao_simulacao <- function(i,df_temp=df_sim){
aviao <- list()
aviao <- dinamica_coalescente(U = df_temp[i,"U_med"],
S = 0,
N_simul = 100,
seed = as.numeric(Sys.time()),
disp_range = df_temp[i,"d"],
disp_kernel = df_temp[i,"kernel_code"],
landscape = df_temp[i,"txt.file"])
write.csv(aviao,
file = paste0("./SADs/",
gsub(".txt","",df_temp[i,"txt.file"]),"_k",df_temp[i,"k"],".EE")
)
# paralelização da simulacao
registerDoMC(3)
replica.sim <- as.list(1:dim(df_sim)[1])
l_ply(.data = replica.sim, .fun = funcao_simulacao, .parallel = TRUE)
}
for(a in 19:length(k_factor)){
# a <- 20
# i <- 1
df_sim <- df_simulacao %>% filter(k == k_factor[20])
# df_temp=df_sim
### funcao para paralelizar o programa
funcao_simulacao <- function(i,df_temp=df_sim){
aviao <- list()
aviao <- dinamica_coalescente(U = df_temp[i,"U_med"],
S = 0,
N_simul = 100,
seed = as.numeric(Sys.time()),
disp_range = df_temp[i,"d"],
disp_kernel = df_temp[i,"kernel_code"],
landscape = df_temp[i,"txt.file"])
write.csv(aviao,
file = paste0("./SADs/",
gsub(".txt","",df_temp[i,"txt.file"]),"_k",df_temp[i,"k"],".EE")
)
# paralelização da simulacao
registerDoMC(3)
replica.sim <- as.list(1:dim(df_sim)[1])
l_ply(.data = replica.sim, .fun = funcao_simulacao, .parallel = TRUE)
}
}
for(a in 19:length(k_factor)){
# a <- 20
# i <- 1
df_sim <- df_simulacao %>% filter(k == k_factor[20])
# df_temp=df_sim
### funcao para paralelizar o programa
funcao_simulacao <- function(i,df_temp=df_sim){
aviao <- list()
aviao <- dinamica_coalescente(U = df_temp[i,"U_med"],
S = 0,
N_simul = 100,
seed = as.numeric(Sys.time()),
disp_range = df_temp[i,"d"],
disp_kernel = df_temp[i,"kernel_code"],
landscape = df_temp[i,"txt.file"])
write.csv(aviao,
file = paste0("./SADs/",
gsub(".txt","",df_temp[i,"txt.file"]),"_k",df_temp[i,"k"],".EE")
)
# paralelização da simulacao
registerDoMC(3)
replica.sim <- as.list(1:dim(df_sim)[1])
l_ply(.data = replica.sim, .fun = funcao_simulacao, .parallel = TRUE)
}
}
op <- options(digits.secs=6)
ls()
for(a in 19:length(k_factor)){
# a <- 20
# i <- 1
df_sim <- df_simulacao %>% filter(k == k_factor[20])
# df_temp=df_sim
### funcao para paralelizar o programa
funcao_simulacao <- function(i,df_temp=df_sim){
aviao <- list()
aviao <- dinamica_coalescente(U = df_temp[i,"U_med"],
S = 0,
N_simul = 100,
seed = as.numeric(Sys.time()),
disp_range = df_temp[i,"d"],
disp_kernel = df_temp[i,"kernel_code"],
landscape = df_temp[i,"txt.file"])
write.csv(aviao,
file = paste0("./SADs/",
gsub(".txt","",df_temp[i,"txt.file"]),"_k",df_temp[i,"k"],".EE")
)
# paralelização da simulacao
registerDoMC(3)
replica.sim <- as.list(1:dim(df_sim)[1])
l_ply(.data = replica.sim, .fun = funcao_simulacao, .parallel = TRUE)
}
}
rm(list=ls())
